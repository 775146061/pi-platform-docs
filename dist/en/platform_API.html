<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.35">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>Platform API | pi-network</title><meta name="description" content="pi-network">
    <link rel="modulepreload" href="./assets/app.ead14e12.js"><link rel="modulepreload" href="./assets/platform_API.html.f2e7cbf6.js"><link rel="modulepreload" href="./assets/platform_API.html.fea8cd5a.js"><link rel="modulepreload" href="./assets/plugin-vue_export-helper.21dcd24c.js">
    <link rel="stylesheet" href="./assets/style.d6b67acb.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/./en" class=""><img class="logo" src="./images/Pi.png" alt="pi-network"><span class="site-name can-hide">pi-network</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/./en/platform_API.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./" class="" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><!--[--><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a aria-current="page" href="/./en/platform_API.html" class="router-link-active router-link-exact-active router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/./" class="" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul><!--]--></div></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">Platform API <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/./en/platform_API.html#overview" class="router-link-active router-link-exact-active sidebar-item" aria-label="Overview"><!--[--><!--]--> Overview <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/./en/platform_API.html#base-path" class="router-link-active router-link-exact-active sidebar-item" aria-label="Base path:"><!--[--><!--]--> Base path: <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/./en/platform_API.html#authorization" class="router-link-active router-link-exact-active sidebar-item" aria-label="Authorization"><!--[--><!--]--> Authorization <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/./en/platform_API.html#api-reference" class="router-link-active router-link-exact-active sidebar-item" aria-label="API Reference"><!--[--><!--]--> API Reference <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/./en/platform_API.html#authentication" class="router-link-active router-link-exact-active sidebar-item" aria-label="Authentication"><!--[--><!--]--> Authentication <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/./en/platform_API.html#payments" class="router-link-active router-link-exact-active sidebar-item" aria-label="Payments"><!--[--><!--]--> Payments <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a aria-current="page" href="/./en/platform_API.html#resource-types" class="router-link-active router-link-exact-active sidebar-item" aria-label="Resource types"><!--[--><!--]--> Resource types <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/./en/platform_API.html#userdto" class="router-link-active router-link-exact-active sidebar-item" aria-label="UserDTO"><!--[--><!--]--> UserDTO <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/./en/platform_API.html#paymentdto" class="router-link-active router-link-exact-active sidebar-item" aria-label="PaymentDTO"><!--[--><!--]--> PaymentDTO <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="platform-api" tabindex="-1"><a class="header-anchor" href="#platform-api" aria-hidden="true">#</a> Platform API</h1><p>The platform API allows you to read and write data to the Pi Servers related with your app deployed on the Pi App Platform, and your app&#39;s users.</p><h2 id="overview" tabindex="-1"><a class="header-anchor" href="#overview" aria-hidden="true">#</a> Overview</h2><h3 id="base-path" tabindex="-1"><a class="header-anchor" href="#base-path" aria-hidden="true">#</a> Base path:</h3><p>The latest version of the Platform API is available at <code>api.minepi.com/v2</code>.</p><blockquote><p><strong>Note about API versioning:</strong></p><p>The platform API is currently in v2. As much as possible, we will not make any breaking changes to a version of an API, and only release breaking changes as new major versions. However, we might make breaking changes to an existing version without notice, if those are necessary (e.g security or privacy fixes).</p></blockquote><h3 id="authorization" tabindex="-1"><a class="header-anchor" href="#authorization" aria-hidden="true">#</a> Authorization</h3><p>The Platform API supports two different authorization mechanisms.</p><h4 id="access-token-authorization" tabindex="-1"><a class="header-anchor" href="#access-token-authorization" aria-hidden="true">#</a> Access token authorization</h4><p>Some API calls require that you provide a user&#39;s access token to access the resource. They are generally related with a user&#39;s data (e.g: <code>/me</code>). Those endpoints can be accessed using the following Authorization header:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Authorization: Bearer &lt;user access token&gt;
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>Those endpoints can be indifferently accessed from your backend / server app, or from your frontend / client app.</p><h4 id="server-api-key-authorization" tabindex="-1"><a class="header-anchor" href="#server-api-key-authorization" aria-hidden="true">#</a> Server API Key authorization</h4><p>For various reasons, some API calls must be made from your backend / server app. Those endpoints can be accessed using the following Authorization header:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Authorization: Key &lt;your Server API Key&gt;
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><blockquote><p><strong>Warning: Server API keys are for servers only</strong></p><p>Your Server API Key <strong>must</strong> be kept on your server, and must not be sent to clients (do not use it in your client javascript code). In the future, your server API key might enable sensitive operations on your app itself that your users should not be allowed to perform. Letting users access your server API key is a <strong>serious security breach</strong>.</p></blockquote><h2 id="api-reference" tabindex="-1"><a class="header-anchor" href="#api-reference" aria-hidden="true">#</a> API Reference</h2><h3 id="authentication" tabindex="-1"><a class="header-anchor" href="#authentication" aria-hidden="true">#</a> Authentication</h3><h4 id="access-a-user-s-resource" tabindex="-1"><a class="header-anchor" href="#access-a-user-s-resource" aria-hidden="true">#</a> Access a user&#39;s resource:</h4><p>Retrieve the user&#39;s information.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET /me
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>Authorization method: <strong>Access token</strong></li><li>Response type: <a href="#UserDTO">UserDTO</a></li></ul><p>Verify the data obtained with the frontend SDK (a malicious user could tamper with the requests and send you wrong data) by sending the user’s access token to your backend and using this API endpoint to verify the token validity and the user’s identity.</p><p>Access tokens are long, random strings, and the request will fail (401 HTTP error code) if the token has been tampered with (a tampered token would not belong to any real user).</p><h3 id="payments" tabindex="-1"><a class="header-anchor" href="#payments" aria-hidden="true">#</a> Payments</h3><p>Base path: <code>/payments</code>.</p><h4 id="create-a-payment" tabindex="-1"><a class="header-anchor" href="#create-a-payment" aria-hidden="true">#</a> Create a payment:</h4><p>Do not create payments using the Platform API. Use the client-side Javascript SDK for this purpose.</p><h4 id="get-a-payment" tabindex="-1"><a class="header-anchor" href="#get-a-payment" aria-hidden="true">#</a> Get a payment:</h4><p>Get information about a payment.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>GET /payments/{payment_id}
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>Authorization method: <strong>Server API Key</strong></li><li>Response type: <a href="#PaymentDTO">PaymentDTO</a></li></ul><h4 id="approve-a-payment" tabindex="-1"><a class="header-anchor" href="#approve-a-payment" aria-hidden="true">#</a> Approve a payment:</h4><p>Server-side approval: mark a payment as approved, enabling the user to submit the transaction to the blockchain.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>POST /payments/{payment_id}/approve
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>Authorization method: <strong>Server API Key</strong></li><li>Response type: <a href="#PaymentDTO">PaymentDTO</a></li></ul><h4 id="complete-a-payment" tabindex="-1"><a class="header-anchor" href="#complete-a-payment" aria-hidden="true">#</a> Complete a payment:</h4><p>Server-side completion: mark a payment as completed by proving to the Pi Servers that your app has obtained the payment&#39;s txid, enabling the user to close the payment flow.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>POST /payments/{payment_id}/complete
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><ul><li>Authorization method: <strong>Server API Key</strong></li><li>Response type: <a href="#PaymentDTO">PaymentDTO</a></li></ul><p>Example request body:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
  &quot;txid&quot;: &quot;7a7ed20d3d72c365b9019baf8dc4c4e3cce4c08114d866e47ae157e3a796e9e7&quot;
}
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="resource-types" tabindex="-1"><a class="header-anchor" href="#resource-types" aria-hidden="true">#</a> Resource types</h2><h3 id="userdto" tabindex="-1"><a class="header-anchor" href="#userdto" aria-hidden="true">#</a> <code>UserDTO</code></h3><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;uid&quot;</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token comment">// An app-specific user identifier</span>
  <span class="token string-property property">&quot;username&quot;</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token comment">// The user&#39;s Pi username. Requires the `username` scope.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="paymentdto" tabindex="-1"><a class="header-anchor" href="#paymentdto" aria-hidden="true">#</a> <code>PaymentDTO</code></h3><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token punctuation">{</span>
  <span class="token comment">// Payment data:</span>
  <span class="token string-property property">&quot;identifier&quot;</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token comment">// The payment identifier</span>
  <span class="token string-property property">&quot;user_uid&quot;</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token comment">// The user&#39;s app-specific ID</span>
  <span class="token string-property property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token comment">// The payment amount</span>
  <span class="token string-property property">&quot;memo&quot;</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token comment">// A string provided by the developer, shown to the user</span>
  <span class="token string-property property">&quot;metadata&quot;</span><span class="token operator">:</span> Object<span class="token punctuation">,</span> <span class="token comment">// An object provided by the developer for their own usage</span>
  <span class="token string-property property">&quot;to_address&quot;</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token comment">// The recipient address of the blockchain transaction</span>
  <span class="token string-property property">&quot;created_at&quot;</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token comment">// The payment&#39;s creation timestamp</span>
  
  <span class="token comment">// Status flags representing the current state of this payment</span>
  <span class="token string-property property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;developer_approved&quot;</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> <span class="token comment">// Server-Side Approval</span>
    <span class="token string-property property">&quot;transaction_verified&quot;</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> <span class="token comment">// Blockchain transaction verified</span>
    <span class="token string-property property">&quot;developer_completed&quot;</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> <span class="token comment">// Server-Side Completion</span>
    <span class="token string-property property">&quot;cancelled&quot;</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> <span class="token comment">// Cancelled by the developer or by Pi Network</span>
    <span class="token string-property property">&quot;user_cancelled&quot;</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> <span class="token comment">// Cancelled by the user</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  
  <span class="token comment">// Blockchain transaction data:</span>
  <span class="token string-property property">&quot;transaction&quot;</span><span class="token operator">:</span> <span class="token keyword">null</span> <span class="token operator">|</span> <span class="token punctuation">{</span> <span class="token comment">// This is null if no transaction has been made yet</span>
    <span class="token string-property property">&quot;txid&quot;</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token comment">// The id of the blockchain transaction</span>
    <span class="token string-property property">&quot;verified&quot;</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">,</span> <span class="token comment">// True if the transaction matches the payment, false otherwise</span>
    <span class="token string-property property">&quot;_link&quot;</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token comment">// A link to the operation on the Blockchain API</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><!--]--></div><footer class="page-meta"><!----><!----><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="./assets/app.ead14e12.js" defer></script>
  </body>
</html>
